<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>David Thompson's Dashboard</title>
        <meta charset='UTF-8'>
        <meta name='viewport' content='width=device-width, initial-scale=1.0'>
        <!-- Bootstrap -->
        <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css'>
        <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js'></script>
        <script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js'></script>
        <!-- Flotr2 -->
        <script src="js/flotr2.min.js"></script>
        <!-- ChartJS -->
        <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.bundle.min.js'></script>
        <!-- Chartist -->
        <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/chartist/0.10.1/chartist.min.css'>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/chartist/0.10.1/chartist.min.js'></script>
        <script src='js/chartist-plugin-axistitle.js'></script>
        <!-- Google Charts -->
        <script src='https://www.gstatic.com/charts/loader.js'></script>
        <script>
            google.charts.load('current', { packages: ['corechart'] });
        </script>

        <script type='text/javascript'>
            var kpi1data;
            var kpi2data;
            var kpi3data;
            var kpi4data;
            
            // Configuration for Flotr2 charting
            //
            var flotrConfig = {
                surfaceFor: function(element) {
                    return element;
                },
                showKpiChart1: function(div) {
                    Flotr.draw(div, kpi1data, {
                        title: "2016 Revenue",
                        HtmlText: false,
                        yaxis: {
                            min: 0,
                            tickDecimals: 1,
                            title: 'Millions'
                        },
                        xaxis: {
                            autoscale: true,
                            autoscaleMargin: 1,
                            title: 'Quarters',
                            ticks: [[1, '1st'], [2, '2nd'], [3, '3rd'], [4, '4th']]
                        }
                    });
                },
                showKpiChart2: function(div) {
                    Flotr.draw(div, kpi2data, {
                        title: "2016 Expenses",
                        HtmlText: false,
                        yaxis: {
                            min: 0,
                            title: 'Millions'
                        },
                        xaxis: {
                            autoscale: true,
                            autoscaleMargin: 1,
                            title: 'Quarters',
                            ticks: [[1, '1st'], [2, '2nd'], [3, '3rd'], [4, '4th']]
                        },
                        bars: {
                            show: true
                        }
                    });
                },
                showKpiChart3: function(div) {
                    var kpi3dataForPie = [
                        { data: [kpi3data[0][0]], label: '1st' },
                        { data: [kpi3data[0][1]], label: '2nd' },
                        { data: [kpi3data[0][2]], label: '3rd' },
                        { data: [kpi3data[0][3]], label: '4th' }
                    ]
                    Flotr.draw(div, kpi3dataForPie, {
                        title: "2016 Profit",
                        HtmlText: false,
                        grid: {
                            verticalLines: false,
                            horizontalLines: false
                        },
                        yaxis: { showLabels: false },
                        xaxis: { showLabels: false },
                        pie: {
                            show: true,
                            explode: 2
                        },
                        legend: {
                            position: 'se',
                            backgroundColor: '#D2E8FF'
                        }
                    });
                },
                showKpiChart4: function(div) {
                    Flotr.draw(div, kpi4data, {
                        title: "2016 Customers",
                        yaxis: {
                            min: 0,
                            title: 'Thousands'
                        },
                        xaxis: {
                            autoscale: true,
                            autoscaleMargin: 1,
                            title: 'Quarters',
                            ticks: [[1, '1st'], [2, '2nd'], [3, '3rd'], [4, '4th']]
                        }
                    });
                }
            };
            
            // Configuration for ChartJS charting
            //
            var chartjsConfig = {
                surfaceFor: function(element) {
                    var canvas = document.createElement('canvas');
                    element.appendChild(canvas);
                    return canvas.getContext('2d');
                },
                showKpiChart1: function(ctx) {
                    var chartOpts = {
                        type: 'line',
                        data: {
                            labels: ['1st', '2nd', '3rd', '4th'],
                            datasets: [{
                                label: '2016 Revenue',
                                data: [
                                    kpi1data[0][0][1],
                                    kpi1data[0][1][1],
                                    kpi1data[0][2][1],
                                    kpi1data[0][3][1]
                                ],
                                backgroundColor: 'rgba(153,255,51,0.4)'
                            }]
                        },
                        options: {
                            scales: {
                                yAxes: [{
                                    scaleLabel: {
                                        display: true,
                                        labelString: 'Millions'
                                    }
                                }],
                                xAxes: [{
                                    scaleLabel: {
                                        display: true,
                                        labelString: 'Quarters'
                                    }
                                }]
                            }
                        }
                    };
                    var chart = new Chart(ctx, chartOpts);
                },
                showKpiChart2: function(ctx) {
                    var chartOpts = {
                        type: 'bar',
                        data: {
                            labels: ['1st', '2nd', '3rd', '4th'],
                            datasets: [{
                                label: '2016 Expenses',
                                data: [
                                    kpi2data[0][0][1],
                                    kpi2data[0][1][1],
                                    kpi2data[0][2][1],
                                    kpi2data[0][3][1]
                                ],
                                backgroundColor: 'rgba(255,153,51,0.4)'
                            }]
                        },
                        options: {
                            scales: {
                                yAxes: [{
                                    scaleLabel: {
                                        display: true,
                                        labelString: 'Millions'
                                    },
                                    ticks: {
                                        beginAtZero: true
                                    }
                                }],
                                xAxes: [{
                                    scaleLabel: {
                                        display: true,
                                        labelString: 'Quarters'
                                    }
                                }]
                            }
                        }
                    };
                    var chart = new Chart(ctx, chartOpts);
                },
                showKpiChart3: function(ctx) {
                    var chartOpts = {
                        type: 'pie',
                        data: {
                            labels: ['1st', '2nd', '3rd', '4th'],
                            datasets: [{
                                label: '2016 Profit',
                                data: [
                                    kpi3data[0][0][1],
                                    kpi3data[0][1][1],
                                    kpi3data[0][2][1],
                                    kpi3data[0][3][1]
                                ],
                                backgroundColor: [
                                    'rgba( 37,51,255,0.4)',
                                    'rgba( 75,51,255,0.4)',
                                    'rgba(112,51,255,0.4)',
                                    'rgba(153,51,255,0.4)'
                                ]
                            }]
                        }
                    };
                    var chart = new Chart(ctx, chartOpts);
                },
                showKpiChart4: function(ctx) {
                    var chartOpts = {
                        type: 'line',
                        data: {
                            labels: ['1st', '2nd', '3rd', '4th'],
                            datasets: [{
                                label: '2016 Customers',
                                data: [
                                    kpi4data[0][0][1],
                                    kpi4data[0][1][1],
                                    kpi4data[0][2][1],
                                    kpi4data[0][3][1]
                                ],
                                backgroundColor: 'rgba(51,153,255,0.4)'
                            }]
                        },
                        options: {
                            scales: {
                                yAxes: [{
                                    scaleLabel: {
                                        display: true,
                                        labelString: 'Thousands'
                                    },
                                    ticks: {
                                        startAtZero: true
                                    }
                                }],
                                xAxes: [{
                                    scaleLabel: {
                                        display: true,
                                        labelString: 'Quarters'
                                    }
                                }]
                            }
                        }
                    };
                    var chart = new Chart(ctx, chartOpts);
                }
            };

            // Configuration for Chartist charting
            //
            var chartistConfig = {
                surfaceFor: function(element) {
                    var div = document.createElement('div');
                    element.appendChild(div);
                    return div;
                },
                showKpiChart1: function(div) {
                    Chartist.Line(div, {
                        labels: ['1st', '2nd', '3rd', '4th'],
                        series: [[
                            kpi1data[0][0][1],
                            kpi1data[0][1][1],
                            kpi1data[0][2][1],
                            kpi1data[0][3][1]
                        ]]
                    }, {
                        plugins: [
                            Chartist.plugins.ctAxisTitle({
                                axisX: {
                                    axisTitle: '2016 Revenue by Quarter',
                                    offset: {
                                        x: 0,
                                        y: 25
                                    }
                                },
                                axisY: {
                                    axisTitle: 'Millions',
                                    flipTitle: true,
                                    offset: {
                                        x: 0,
                                        y: 20
                                    }
                                }
                            })
                        ]
                    });
                },
                showKpiChart2: function(div) {
                    Chartist.Bar(div, {
                        labels: ['1st', '2nd', '3rd', '4thc'],
                        series: [[
                            kpi2data[0][0][1],
                            kpi2data[0][1][1],
                            kpi2data[0][2][1],
                            kpi2data[0][3][1]
                        ]]
                    }, {
                        plugins: [
                            Chartist.plugins.ctAxisTitle({
                                axisX: {
                                    axisTitle: '2016 Expenses by Quarter',
                                    offset: {
                                        x: 0,
                                        y: 25
                                    }
                                },
                                axisY: {
                                    axisTitle: 'Millions',
                                    flipTitle: true,
                                    offset: {
                                        x: 0,
                                        y: 20
                                    }
                                }
                            })
                        ]
                    });
                },
                showKpiChart3: function(div) {
                    Chartist.Pie(div, {
                        series: [
                            kpi3data[0][0][1],
                            kpi3data[0][1][1],
                            kpi3data[0][2][1],
                            kpi3data[0][3][1]
                        ]
                    });
                },
                showKpiChart4: function(div) {
                    Chartist.Line(div, {
                        labels: ['1st', '2nd', '3rd', '4thc'],
                        series: [[
                            kpi4data[0][0][1],
                            kpi4data[0][1][1],
                            kpi4data[0][2][1],
                            kpi4data[0][3][1]
                        ]]
                    }, {
                        plugins: [
                            Chartist.plugins.ctAxisTitle({
                                axisX: {
                                    axisTitle: '2016 Customers by Quarter',
                                    offset: {
                                        x: 0,
                                        y: 25
                                    }
                                },
                                axisY: {
                                    axisTitle: 'Thousands',
                                    flipTitle: true,
                                    offset: {
                                        x: 0,
                                        y: 20
                                    }
                                }
                            })
                        ]
                    });
                }
            };

            // Configuration for Chartist charting
            //
            var googleChartsConfig = {
                surfaceFor: function(element) {
                    return element;
                },
                showKpiChart1: function(div) {
                    var chart = new google.visualization.LineChart(div);
                    chart.draw(
                        google.visualization.arrayToDataTable([
                            [ 'Quarters', 'Millions' ],
                            [ '1st', kpi1data[0][0][1] ],
                            [ '2nd', kpi1data[0][1][1] ],
                            [ '3rd', kpi1data[0][2][1] ],
                            [ '4th', kpi1data[0][3][1] ]
                        ]),
                        {
                            title: '2016 Revenue',
                            animation: {
                                duration: 1000,
                                easing: 'out',
                                startup: true
                            },
                            legend: {
                                position: 'none'
                            },
                            hAxis: {
                                title: 'Quarter'
                            },
                            vAxis: {
                                title: 'Millions'
                            }
                        }
                    );
                },
                showKpiChart2: function(div) {
                    var chart = new google.visualization.ColumnChart(div);
                    chart.draw(
                        google.visualization.arrayToDataTable([
                            [ 'Quarters', 'Millions' ],
                            [ '1st', kpi2data[0][0][1] ],
                            [ '2nd', kpi2data[0][1][1] ],
                            [ '3rd', kpi2data[0][2][1] ],
                            [ '4th', kpi2data[0][3][1] ]
                        ]),
                        {
                            title: '2016 Expenses',
                            animation: {
                                duration: 1000,
                                easing: 'out',
                                startup: true
                            },
                            legend: {
                                position: 'none'
                            },
                            hAxis: {
                                title: 'Quarter'
                            },
                            vAxis: {
                                title: 'Millions'
                            }
                        }
                    );
                },
                showKpiChart3: function(div) {
                    var chart = new google.visualization.PieChart(div);
                    chart.draw(
                        google.visualization.arrayToDataTable([
                            [ 'Quarters', 'Millions' ],
                            [ '1st', kpi3data[0][0][1] ],
                            [ '2nd', kpi3data[0][1][1] ],
                            [ '3rd', kpi3data[0][2][1] ],
                            [ '4th', kpi3data[0][3][1] ]
                        ]),
                        {
                            title: '2016 Profits',
                            animation: {
                                startup: true
                            },
                            legend: {
                                position: 'none'
                            },
                            slices: {
                                0: { offset: 0.2 }
                            }
                        }
                    );
                },
                showKpiChart4: function(div) {
                    var chart = new google.visualization.AreaChart(div);
                    chart.draw(
                        google.visualization.arrayToDataTable([
                            [ 'Quarters', 'Thousands' ],
                            [ '1st', kpi4data[0][0][1] ],
                            [ '2nd', kpi4data[0][1][1] ],
                            [ '3rd', kpi4data[0][2][1] ],
                            [ '4th', kpi4data[0][3][1] ]
                        ]),
                        {
                            title: '2016 Customers',
                            animation: {
                                duration: 1000,
                                easing: 'out',
                                startup: true
                            },
                            legend: {
                                position: 'none'
                            },
                            hAxis: {
                                title: 'Quarter'
                            },
                            vAxis: {
                                title: 'Thousands'
                            }
                        }
                    );
                }
            };

            function showAlert(message) {
                if (!message)
                    $('#alert').hide();
                else
                    $('#alert').html(message).show();
            }

            function kpiAt(index) {
                return $('#KPI' + index);
            }

            function clearKPIs() {
                showAlert();
                [1, 2, 3, 4].forEach(function(item) { kpiAt(item).empty(); });
            }
            
            function showCharts(chartConfig) {
                chartConfig.showKpiChart1(chartConfig.surfaceFor(kpiAt(1)[0]));
                chartConfig.showKpiChart2(chartConfig.surfaceFor(kpiAt(2)[0]));
                chartConfig.showKpiChart3(chartConfig.surfaceFor(kpiAt(3)[0]));
                chartConfig.showKpiChart4(chartConfig.surfaceFor(kpiAt(4)[0]));
            }

            function flotr2() {
                clearKPIs();
                showCharts(flotrConfig);
            }

            function chartjs() {
                clearKPIs();

                Chart.defaults.global.responsive = true;
                Chart.defaults.global.maintainAspectRatio = false;
                showCharts(chartjsConfig);
            }

            function chartist() {
                clearKPIs();
                showCharts(chartistConfig);
            }
            function googleCharts() {
                clearKPIs();
                google.charts.setOnLoadCallback(function() {
                    showCharts(googleChartsConfig);
                });
            }
            function d3() {
                showAlert('D3 is not implemented yet!');
            }
            function leaflet() {
                showAlert('Leaflet is not implemented yet!');
            }
            
            $(function() {
               kpi1data = [[[1, 2.1], [2, 2.75], [3, 5.6], [4, 4.9]]];  // revenue 
               kpi2data = [[[1, 1.3], [2, 1.4], [3, 1.4], [4, 1.3]]];   // expenses 
               kpi3data = [[[1, 0.8], [2, 1.35], [3, 4.2], [4, 3.6]]];  // profit 
               kpi4data = [[[1, 75], [2, 83], [3, 150], [4, 130]]];     // customers
               
               $('#alert').hide();
            });
        </script>
        <style>
            .kpis {
                height: 150px;
            }
            .container-kpis {
                height: 200px;
            }
            /* make room for the Bootstrap navbar, per
             * https://getbootstrap.com/docs/3.3/components/#navbar
             * (see section "Body padding required")
             */
            body {
                padding-top: 70px;
            }
        </style>
    </head>
    <body>
        <div id='wrapper'>
            <nav class='navbar navbar-inverse navbar-fixed-top' role='navigation'>
                <div class='navbar-header'>
                    <button type='button' class='navbar-toggle' data-toggle='collapse' data-target='.navbar-ex1-collapse'>
                        <span class='icon-bar'></span>
                        <span class='icon-bar'></span>
                        <span class='icon-bar'></span>
                    </button>
                    <a class='navbar-brand' style='color: white'>David Thompson's Dashboard</a>
                </div>
                <div class='collapse navbar-collapse navbar-ex1-collapse'>
                    <ul class='nav navbar-nav'>
                        <li><a onclick='clearKPIs()'> Layout</a></li>
                        <li><a onclick='flotr2()'> Flotr2</a></li>
                        <li><a onclick='chartjs()'> Chart.js</a></li>
                        <li><a onclick='chartist()'> Chartist.js</a></li>
                        <li><a onclick='googleCharts()'> Google Charts</a></li>
                        <li><a onclick='d3()'> D3</a></li>
                        <li><a onclick='leaflet()'> Leaflet</a></li>
                    </ul>
                </div>
            </nav>
            
            <!-- alert bar -->
            <div id='alert' class='alert alert-warning' role='alert' >
                This is a primary alert—check it out!
            </div>
            
            <!-- main content -->
            <div id='page-wrapper'>
                <div class='container-fluid'>
                    
                    <!-- Heading -->
                    <div class='row'>
                        <div class='col-lg-12'>
                            <div class='jumbotron'>
                                <h3 class='page-header' style='text-align: center'>
                                    Key Performance Indicators
                                </h3>
                            </div>
                        </div>
                    </div>
                    
                    <!-- KPI row 1 -->
                    <div class='container-fluid bg-3 text-center container-kpis'>
                        <div class='row'>
                            <div class='col-sm-4'>
                                <p><strong>KPI 1</strong> <span class='label label-warning'>Alert!</span></p>
                                <div id='KPI1' class='kpis'></div>
                            </div>
                            <div class='col-sm-4'>
                                <p><strong>KPI 2</strong></p>
                                <div id='KPI2' class='kpis'></div>
                            </div>
                            <div class='col-sm-4'>
                                <p><strong>KPI 3</strong> <span class='label label-danger'>Problem!</span></p>
                                <div id='KPI3' class='kpis'></div>
                            </div>
                        </div>
                    </div>

                    <!-- KPI row 2 -->
                    <div class='container-fluid bg-3 text-center container-kpis'>
                        <div class='row'>
                            <p><strong>KPI 4</strong> <span class='label label-success'>Nice!</span></p>
                            <div id='KPI4' class='kpis'></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <br/>
            
            <!-- footer -->
            <footer class='container-fluid bg-4 text-center' style='background-color: black; color: white'>
                <br />
                <p>Data Visualizations by the author
                <br />
                <a href='https://getbootstrap.com'>Bootstrap</a>
                </p>
            </footer>
        </div>
    </body>
</html>
