<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>David Thompson's Dashboard</title>
        <meta charset='UTF-8'>
        <meta name='viewport' content='width=device-width, initial-scale=1.0'>
        <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css'>
        <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js'></script>
        <script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js'></script>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.bundle.min.js'></script>
        <script src="js/flotr2.min.js"></script>
        <script type='text/javascript'>
            var kpi1data;
            var kpi2data;
            var kpi3data;
            var kpi4data;

            function showAlert(message) {
                if (!message)
                    $('#alert').hide();
                else
                    $('#alert').html(message).show();
            }
            function kpiAt(index) {
                return $('#KPI' + index);
            }
            function clearKPIs() {
                showAlert();
                [1, 2, 3, 4].forEach(function(item) { kpiAt(item).empty(); });
            }
            function flotr2() {
                clearKPIs();

                var kpi1div = kpiAt(1)[0];
                Flotr.draw(kpi1div, kpi1data, {
                    title: "2016 Revenue",
                    HtmlText: false,
                    yaxis: {
                        min: 0,
                        tickDecimals: 1,
                        title: 'Millions'
                    },
                    xaxis: {
                        autoscale: true,
                        autoscaleMargin: 1,
                        title: 'Quarters',
                        ticks: [[1, '1st'], [2, '2nd'], [3, '3rd'], [4, '4th']]
                    }
                });
                var kpi2div = kpiAt(2)[0];
                Flotr.draw(kpi2div, kpi2data, {
                    title: "2016 Expenses",
                    HtmlText: false,
                    yaxis: {
                        min: 0,
                        title: 'Millions'
                    },
                    xaxis: {
                        autoscale: true,
                        autoscaleMargin: 1,
                        title: 'Quarters',
                        ticks: [[1, '1st'], [2, '2nd'], [3, '3rd'], [4, '4th']]
                    },
                    bars: {
                        show: true
                    }
                });
                var kpi3div = kpiAt(3)[0];
                var kpi3dataForPie = [
                    { data: [kpi3data[0][0]], label: '1st' },
                    { data: [kpi3data[0][1]], label: '2nd' },
                    { data: [kpi3data[0][2]], label: '3rd' },
                    { data: [kpi3data[0][3]], label: '4th' }
                ]
                Flotr.draw(kpi3div, kpi3dataForPie, {
                    title: "2016 Profit",
                    HtmlText: false,
                    grid: {
                        verticalLines: false,
                        horizontalLines: false
                    },
                    yaxis: { showLabels: false },
                    xaxis: { showLabels: false },
                    pie: {
                        show: true,
                        explode: 2
                    },
                    legend: {
                        position: 'se',
                        backgroundColor: '#D2E8FF'
                    }
                });
                var kpi4div = kpiAt(4)[0];
                Flotr.draw(kpi4div, kpi4data, {
                    title: "2016 Customers",
                    yaxis: {
                        min: 0,
                        title: 'Thousands'
                    },
                    xaxis: {
                        autoscale: true,
                        autoscaleMargin: 1,
                        title: 'Quarters',
                        ticks: [[1, '1st'], [2, '2nd'], [3, '3rd'], [4, '4th']]
                    }
                });
            }
            function chartjs() {
                clearKPIs();

                Chart.defaults.global.responsive = true;
                Chart.defaults.global.maintainAspectRatio = false;

                var canvas = document.createElement('canvas');
                var kpi1div = kpiAt(1)[0];
                kpi1div.appendChild(canvas);
                var ctx = canvas.getContext('2d');
                var chartOpts = {
                    type: 'line',
                    data: {
                        labels: ['1st', '2nd', '3rd', '4th'],
                        datasets: [{
                            label: '2016 Revenue',
                            data: [
                                kpi1data[0][0][1],
                                kpi1data[0][1][1],
                                kpi1data[0][2][1],
                                kpi1data[0][3][1]
                            ],
                            backgroundColor: 'rgba(153,255,51,0.4)'
                        }]
                    },
                    options: {
                        scales: {
                            yAxes: [{
                                scaleLabel: {
                                    display: true,
                                    labelString: 'Millions'
                                }
                            }],
                            xAxes: [{
                                scaleLabel: {
                                    display: true,
                                    labelString: 'Quarters'
                                }
                            }]
                        }
                    }
                };
                var chart = new Chart(ctx, chartOpts);
                
                canvas = document.createElement('canvas');
                var kpi2div = kpiAt(2)[0];
                kpi2div.appendChild(canvas);
                ctx = canvas.getContext('2d');
                chartOpts = {
                    type: 'bar',
                    data: {
                        labels: ['1st', '2nd', '3rd', '4th'],
                        datasets: [{
                            label: '2016 Expenses',
                            data: [
                                kpi2data[0][0][1],
                                kpi2data[0][1][1],
                                kpi2data[0][2][1],
                                kpi2data[0][3][1]
                            ],
                            backgroundColor: 'rgba(255,153,51,0.4)'
                        }]
                    },
                    options: {
                        scales: {
                            yAxes: [{
                                scaleLabel: {
                                    display: true,
                                    labelString: 'Millions'
                                },
                                ticks: {
                                    beginAtZero: true
                                }
                            }],
                            xAxes: [{
                                scaleLabel: {
                                    display: true,
                                    labelString: 'Quarters'
                                }
                            }]
                        }
                    }
                };
                chart = new Chart(ctx, chartOpts);
                
                canvas = document.createElement('canvas');
                var kpi3div = kpiAt(3)[0];
                kpi3div.appendChild(canvas);
                ctx = canvas.getContext('2d');
                chartOpts = {
                    type: 'pie',
                    data: {
                        labels: ['1st', '2nd', '3rd', '4th'],
                        datasets: [{
                            label: '2016 Profit',
                            data: [
                                kpi3data[0][0][1],
                                kpi3data[0][1][1],
                                kpi3data[0][2][1],
                                kpi3data[0][3][1]
                            ],
                            backgroundColor: [
                                'rgba( 37,51,255,0.4)',
                                'rgba( 75,51,255,0.4)',
                                'rgba(112,51,255,0.4)',
                                'rgba(153,51,255,0.4)'
                            ]
                        }]
                    }
                };
                chart = new Chart(ctx, chartOpts);

                canvas = document.createElement('canvas');
                var kpi4div = kpiAt(4)[0];
                kpi4div.appendChild(canvas);
                ctx = canvas.getContext('2d');
                chartOpts = {
                    type: 'line',
                    data: {
                        labels: ['1st', '2nd', '3rd', '4th'],
                        datasets: [{
                            label: '2016 Customers',
                            data: [
                                kpi4data[0][0][1],
                                kpi4data[0][1][1],
                                kpi4data[0][2][1],
                                kpi4data[0][3][1]
                            ],
                            backgroundColor: 'rgba(51,153,255,0.4)'
                        }]
                    },
                    options: {
                        scales: {
                            yAxes: [{
                                scaleLabel: {
                                    display: true,
                                    labelString: 'Thousands'
                                },
                                ticks: {
                                    startAtZero: true
                                }
                            }],
                            xAxes: [{
                                scaleLabel: {
                                    display: true,
                                    labelString: 'Quarters'
                                }
                            }]
                        }
                    }
                };
                chart = new Chart(ctx, chartOpts);
            }
            function chartist() {
                showAlert('Chartist is not implemented yet!');
            }
            function google() {
                showAlert('Google Charts is not implemented yet!');
            }
            function d3() {
                showAlert('D3 is not implemented yet!');
            }
            function leaflet() {
                showAlert('Leaflet is not implemented yet!');
            }
            
            $(function() {
               kpi1data = [[[1, 2.1], [2, 2.75], [3, 5.6], [4, 4.9]]];  // revenue 
               kpi2data = [[[1, 1.3], [2, 1.4], [3, 1.4], [4, 1.3]]];   // expenses 
               kpi3data = [[[1, 0.8], [2, 1.35], [3, 4.2], [4, 3.6]]];  // profit 
               kpi4data = [[[1, 75], [2, 83], [3, 150], [4, 130]]];     // customers
               
               $('#alert').hide();
            });
        </script>
        <style>
            .kpis {
                height: 150px;
            }
            .container-kpis {
                height: 200px;
            }
            /* make room for the Bootstrap navbar, per
             * https://getbootstrap.com/docs/3.3/components/#navbar
             * (see section "Body padding required")
             */
            body {
                padding-top: 70px;
            }
        </style>
    </head>
    <body>
        <div id='wrapper'>
            <nav class='navbar navbar-inverse navbar-fixed-top' role='navigation'>
                <div class='navbar-header'>
                    <button type='button' class='navbar-toggle' data-toggle='collapse' data-target='.navbar-ex1-collapse'>
                        <span class='icon-bar'></span>
                        <span class='icon-bar'></span>
                        <span class='icon-bar'></span>
                    </button>
                    <a class='navbar-brand' style='color: white'>David Thompson's Dashboard</a>
                </div>
                <div class='collapse navbar-collapse navbar-ex1-collapse'>
                    <ul class='nav navbar-nav'>
                        <li><a onclick='clearKPIs()'> Layout</a></li>
                        <li><a onclick='flotr2()'> Flotr2</a></li>
                        <li><a onclick='chartjs()'> Chart.js</a></li>
                        <li><a onclick='chartist()'> Chartist.js</a></li>
                        <li><a onclick='google()'> Google Charts</a></li>
                        <li><a onclick='d3()'> D3</a></li>
                        <li><a onclick='leaflet()'> Leaflet</a></li>
                    </ul>
                </div>
            </nav>
            
            <!-- alert bar -->
            <div id='alert' class='alert alert-warning' role='alert' >
                This is a primary alert—check it out!
            </div>
            
            <!-- main content -->
            <div id='page-wrapper'>
                <div class='container-fluid'>
                    
                    <!-- Heading -->
                    <div class='row'>
                        <div class='col-lg-12'>
                            <div class='jumbotron'>
                                <h3 class='page-header' style='text-align: center'>
                                    Key Performance Indicators
                                </h3>
                            </div>
                        </div>
                    </div>
                    
                    <!-- KPI row 1 -->
                    <div class='container-fluid bg-3 text-center container-kpis'>
                        <div class='row'>
                            <div class='col-sm-4'>
                                <p><strong>KPI 1</strong> <span class='label label-warning'>Alert!</span></p>
                                <div id='KPI1' class='kpis'></div>
                            </div>
                            <div class='col-sm-4'>
                                <p><strong>KPI 2</strong></p>
                                <div id='KPI2' class='kpis'></div>
                            </div>
                            <div class='col-sm-4'>
                                <p><strong>KPI 3</strong> <span class='label label-danger'>Problem!</span></p>
                                <div id='KPI3' class='kpis'></div>
                            </div>
                        </div>
                    </div>

                    <!-- KPI row 2 -->
                    <div class='container-fluid bg-3 text-center container-kpis'>
                        <div class='row'>
                            <p><strong>KPI 4</strong> <span class='label label-success'>Nice!</span></p>
                            <div id='KPI4' class='kpis'></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <br/>
            
            <!-- footer -->
            <footer class='container-fluid bg-4 text-center' style='background-color: black; color: white'>
                <br />
                <p>Data Visualizations by the author
                <br />
                <a href='https://getbootstrap.com'>Bootstrap</a>
                </p>
            </footer>
        </div>
    </body>
</html>
